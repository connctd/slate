<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://api.connctd.io/register'>Sign Up for a Developer Key</a></li>
            <li><a href='https://connctd.com/privacy'>Imprint</a></li>
            <li><a href='https://connctd.com/diclaimer'>Disclaimer</a></li>
            <li><a href='https://connctd.com/pricelist'>Pricelist</a></li>
            <li><a href='https://connctd.com'>connctd Website</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the connctd.io API. This REST based API provides functionality to create, manage and update Things and
other resources in the world of IoT. If you are unfamiliar with our concepts and how we might help you with YOUR
IoT project you can try out our <a href="https://tutorial.connctd.io">tutorial</a>.</p>

          <h1 id="oauth-2-0">OAuth 2.0</h1>

<p>The connctd platform acts as a oauth2 provider implementing all flows described in
<a href="https://tools.ietf.org/html/rfc6749#section-4">rfc6749</a> except the &ldquo;Resource Owner Password Credentials Grant&rdquo;. If you
are planning to develop an app which makes use of e.g. things and units, we highly recommend the
&ldquo;Clients Credentials Flow&rdquo;. This flow will generate a token which ensures that all things and units your 
app creates will exclusively belong to your app. If you are planning to develop a more advanced app that needs to
access things and units that are managed by another app, you need to make use of the
&ldquo;Authorization Code Grant Flow&rdquo; as the access to foreign app resources requires the permission of the foreign app
owner.</p>

<h2 id="client-credentials-flow">Client Credentials Flow</h2>

<p>Retrieves a token which can be used to manage things, units and connectors. See <a href="https://tools.ietf.org/html/rfc6749#section-4.4">rfc6749</a>
for request details.</p>

<blockquote>
<p><strong>Request</strong><br>
POST https://api.connctd.io/oauth2/token<br>
<em>Headers:</em><br>
&nbsp;Content-Type:application/x-www-form-urlencoded<br>
&nbsp;Authorization:Basic base64_encode(YOUR_CLIENT_ID_id:YOUR_CLIENT_SECRET)<br>
<em>Body:</em> see below<br></p>
</blockquote>
<pre class="highlight shell"><code><span class="nv">grant_type</span><span class="o">=</span>client_credentials&amp;scope<span class="o">=</span>connctd.things.read+connctd.connector
</code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vha...."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">3599</span><span class="p">,</span><span class="w">
    </span><span class="s2">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"connctd.connector connctd.things.read"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="authorization-code-grant-flow-implicit-grant-flow">Authorization Code Grant Flow &amp; Implicit Grant Flow</h2>

<p>As already mentioned in the introduction adding this flow to your app only makes sense if your app would like to access
 resources of foreign apps. Details of the flow and how to set each parameter can be found <a href="https://tools.ietf.org/html/rfc6749#section-4.1">here</a>.</p>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/oauth2/auth?state=abcdefghiklmnop
&amp;client_id=1bd2f1a3-e72d-4606-b82b-86d1054f3bd4
&amp;redirect_uri=https%3A%2F%2Fabc%2Fauth%2Fcallback
&amp;response_type=code&amp;scope=connctd.units.read+connctd.things.read+connctd.connector+offline</p>

<p><strong>Response</strong><br>
<em>Code:</em> 301</p>
</blockquote>

<h3 id="redirecting-resource-owner">Redirecting resource owner</h3>

<blockquote>
<p><strong>Request</strong><br>
GET https://YOURREDIRECTIONURL/&hellip;?code=qq1YnxN&hellip;.
&amp;scope=connctd.things.read%20connctd.connector%20offline
&amp;state=abcdefghijklmnoaasa</p>

<p><strong>Request</strong><br>
GET https://YOURREDIRECTIONURL/&hellip;?https://tutorial.connctd.io/callback?error=invalid_scope
&amp;error_description=The+requested+scope+is+invalid%2C+unknown%2C+or+malformed
&amp;state=abcdefghijklmnoaasa
<code class="prettyprint">json
</code></p>
</blockquote>

<p>This request needs to be called by the developer of the app to which resources you would like to get access to. The
request will redirect the developer to connctds consent screen. After he has logged in he is asked weather your app is
allowed to act with the given permissions (your scopes) AND he needs to select one of his apps from a list which defines
 o which app resources your app will get access to. This app selection is quite uncommon for this type of flow but it is
necessary as things and units are not attached to developer accounts but instead to apps (because one
developer account may have multiple apps).</p>

<p>As soon as the developer accepts, the browser gets redirected to the redirection url (which points to your app backend).
It also might happen that he rejects or an error occurs. Depending on the case one of the following redirects will take place:</p>

<aside class="notice">
  In case you would like to use the Implicit Grant Flow just replace the response_type=code with response_type=token in the request on right hand side.
</aside>

<h3 id="requesting-a-token">Requesting a token</h3>

<p>If the requested scopes were granted the redirect uri gets called containing an auth code. Use that one to perform the
request on the right hand side</p>

<blockquote>
<p><strong>Request</strong><br>
POST https://api.connctd.io/oauth2/token<br>
<em>Headers:</em><br>
&nbsp;Content-Type:application/x-www-form-urlencoded<br>
&nbsp;Authorization:Basic base64_encode(YOUR_CLIENT_ID_id:YOUR_CLIENT_SECRET)<br>
<em>Body:</em> see below<br></p>
</blockquote>
<pre class="highlight shell"><code><span class="nv">grant_type</span><span class="o">=</span>authorization_code&amp;code<span class="o">=</span>-auth code from reply of prev request-&amp;
<span class="nv">redirect_uri</span><span class="o">=</span>http%3A%2F%2Fabc.com%%2Fauth%2Fcallback&amp;client_id<span class="o">=</span>1bd2f1a3-e72d-4606-b82b-86d1054f3bd4
</code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"access_token"</span><span class="p">:</span><span class="s2">"..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refresh_token"</span><span class="p">:</span><span class="s2">"..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"scope"</span><span class="p">:</span><span class="s2">"..."</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
          <h1 id="units">Units</h1>

<p>A unit is a primitive container that gives developers the possibility to group things and to put them into a context. Since a unit can reference other units (children and parents) even complex structures of the real world can be modeled like for example a city with it&rsquo;s streets and buildings.</p>

<aside class="notice">
  When doing requests against our units endpoint you have to pass two headers for a successful request handling:
  <ul>
    <li>Authorization:Bearer -your token-</li>
    <li>X-External-Subject-Id:-any id (e.g. customer id) generated by your app-</li>
  </ul>
</aside>

<h2 id="model">Model</h2>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Generated id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Name of unit&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Type of unit&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"things"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"href"</span><span class="p">:</span><span class="s2">"https://api.connctd.io/api/v1/things/ab..."</span><span class="p">}],</span><span class="w">
  </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"tuple(name,json object)"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"children"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"href"</span><span class="p">:</span><span class="s2">"https://api.connctd.io/api/v1/units/xy..."</span><span class="p">}],</span><span class="w">
  </span><span class="s2">"parents"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"href"</span><span class="p">:</span><span class="s2">"https://api.connctd.io/api/v1/units/qw..."</span><span class="p">}],</span><span class="w">
  </span><span class="s2">"subjects"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"href"</span><span class="p">:</span><span class="s2">"https://api.connctd.io/api/v1/subjects/98..."</span><span class="p">}],</span><span class="w">
  </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65...."</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>On the right hand side you can see an exemplary unit. We also offer a <a href="https://github.com/connctd/future-platform/blob/master/domain/unit-schema.json">unit json schema</a> which allows json object validation.</p>

<p>The unit <strong>type</strong> helps to interprete the meaning of a unit. It is meant to be kept very generic like &ldquo;ROOM&rdquo; OR &ldquo;BUILDING&rdquo; instead of using too meaningful types like &ldquo;BATHROOM&rdquo;. If your app requires more information about a unit it is a good way to describe them within the <strong>properties</strong>. Those properties can hold arbitrary information since json objects can be passed. Even json ld is allowed to semantically enrich them. A json ld processor takes care of object validation.</p>

<p>The values of the properties <strong>parents</strong>, <strong>children</strong>, <strong>subjects</strong> and <strong>things</strong> are lists holding references to other resources.</p>

<h2 id="create-unit">Create unit</h2>

<blockquote>
<p><strong>Request</strong><br>
POST https://api.connctd.io/api/v1/units<br>
<em>Headers:</em><br>
&nbsp;Content-Type:application/json<br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> see below<br></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My House"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOUSE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"address"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"number"</span><span class="p">:</span><span class="s2">"25"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street"</span><span class="p">:</span><span class="s2">"..."</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 201<br>
<em>Body:</em> Id of newly created unit. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e1de3bcf-7699-4838-97ec-635618fb3caa"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Creates an empty unit. Additional information like parents, children or subjects can be added by subsequent calls.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<h2 id="retrieve-units">Retrieve units</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/units<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> Array of units. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/units/37cbbcfb-9a5c-4931-aa55-f73ff0af0e80"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<p>Retrieves a list of resource links to units the user belongs to</p>

<p>Required scope: <code class="prettyprint">connctd.units.read</code></p>

<h2 id="retrieve-unit">Retrieve unit</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/units/-unitId-<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> A single unit. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e1de3bcf-7699-4838-97ec-635618fb3caa"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My House"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOUSE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"things"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"details"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"number"</span><span class="p">:</span><span class="mi">25</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street"</span><span class="p">:</span><span class="s2">"..."</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"children"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"parents"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"subjects"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
</span><span class="p">}</span><span class="w">   
</span></code></pre>
<p>Retrieves a unit by id</p>

<p>Required scope: <code class="prettyprint">connctd.units.read</code></p>

<h2 id="delete-unit">Delete unit</h2>

<blockquote>
<p><strong>Request</strong><br>
DELETE https://api.connctd.io/api/v1/units/-unitId-<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 204</p>
</blockquote>

<p>Removes a unit by its id.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<h2 id="get-unit-references">Get unit references</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/units/-unitId-/-parents|children-<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> List of unit references. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/units/1376f734-dbfc-486d-b264-f62d3ff88579"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of unit references.</p>

<p>Required scope: <code class="prettyprint">connctd.units.read</code></p>

<h2 id="add-unit-reference">Add unit reference</h2>

<blockquote>
<p><strong>Request</strong><br>
POST https://api.connctd.io/api/v1/units/-unitId-/-parents|children-<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> Id of parent/child. See example below<br></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1376f734-dbfc-486d-b264-f62d3ff88579"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 201</p>
</blockquote>

<p>Adds a reference to another unit. The reference also appears within the referenced unit either as parent or child reference.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<h2 id="remove-unit-reference">Remove unit reference</h2>

<blockquote>
<p><strong>Request</strong><br>
DELETE https://api.connctd.io/api/v1/units/-unitId-/-parents|children-<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> Id of parent/child unit. See example below<br></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1376f734-dbfc-486d-b264-f62d3ff88579"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 204</p>
</blockquote>

<p>Removes a reference to another unit. The reference also disappears from within the referenced unit.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<h2 id="get-subject-references">Get subject references</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/units/-unitId-/subjects<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> List of subject references. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/subjects/123-55664-aab-2456"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves list of subject references</p>

<p>Required scope: <code class="prettyprint">connctd.units.read</code></p>

<aside class="note">
Subject references can be used to assign (external) subject ids to a specific unit. As soon a one external subject (lets say for example S1) is assigned to the unit of another subject (lets say S2), the result list when retrieving the units of S1 will contain the unit of S2.   
</aside>

<h2 id="add-subject-reference">Add subject reference</h2>

<blockquote>
<p><strong>Request</strong><br>
POST https://api.connctd.io/api/v1/units/-unitId-/subjects<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> Id of subject. See example below<br></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"any id your application is working with - e.g. customer id"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 201</p>
</blockquote>

<p>Adds a reference to a subject.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<h2 id="remove-subject-reference">Remove subject reference</h2>

<blockquote>
<p><strong>Request</strong><br>
DELETE https://api.connctd.io/api/v1/units/-unitId-/subjects<br>
<em>Headers:</em><br>
&nbsp;Content-Type:application/json<br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> Id of subject. See example below<br></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123-55664-aab-2456"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 204</p>
</blockquote>

<p>Removes a reference to a subject.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<h2 id="get-properties">Get properties</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/units/-unitId-/properties<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> List of properties. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"address"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all properties</p>

<p>Required scope: <code class="prettyprint">connctd.units.read</code></p>

<h2 id="get-property">Get property</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/units/-unitId-/properties/-propertyName-<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> A single property. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Read a specific property</p>

<p>Required scope: <code class="prettyprint">connctd.units.read</code></p>

<h2 id="add-property">Add property</h2>

<blockquote>
<p><strong>Request</strong><br>
POST https://api.connctd.io/api/v1/units/-unitId-/properties<br>
<em>Headers:</em><br>
&nbsp;Content-Type:application/json<br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> New property. See example below<br></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyNewProperty"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="err">-any</span><span class="w"> </span><span class="err">json(-ld)-</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 201</p>
</blockquote>

<p>Adds a new property.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<h2 id="update-property">Update property</h2>

<blockquote>
<p><strong>Request</strong><br>
PUT https://api.connctd.io/api/v1/units/-unitId-/properties<br>
<em>Headers:</em><br>
&nbsp;Content-Type:application/json<br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> New property value. See example below<br></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyNewProperty"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 204</p>
</blockquote>

<p>Updates a property.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<h2 id="delete-property">Delete property</h2>

<blockquote>
<p><strong>Request</strong><br>
DELETE https://api.connctd.io/api/v1/units/-unitId-/properties/-propertyName-<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<p>Removes a property from property set</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<h2 id="get-thing-references">Get thing references</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/units/-unitId-/things<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> List of thing references. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/things/591327fe-5c1a-4dbb-a96b-9bef4de0a273"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all thing references</p>

<p>Required scope: <code class="prettyprint">connctd.units.read</code></p>

<h2 id="add-thing-reference">Add thing reference</h2>

<blockquote>
<p><strong>Request</strong><br>
POST https://api.connctd.io/api/v1/units/-unitId-/things<br>
<em>Headers:</em><br>
&nbsp;Content-Type:application/json<br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> Id of thing. See example below<br></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"591327fe-5c1a-4dbb-a96b-9bef4de0a273"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 201</p>
</blockquote>

<p>Adds a reference to a things.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<h2 id="remove-thing-reference">Remove thing reference</h2>

<blockquote>
<p><strong>Request</strong><br>
DELETE https://api.connctd.io/api/v1/units/-unitId-/things<br>
<em>Headers:</em><br>
&nbsp;Content-Type:application/json<br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> Id of thing. See example below<br></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"591327fe-5c1a-4dbb-a96b-9bef4de0a273"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 204</p>
</blockquote>

<p>Removes a reference to a thing.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

          <h1 id="things">Things</h1>

<p>Things in our API are abstract representations of specific IoT related devices. They can be created, deleted
and managed with our API. Depending on the requested action the supplied token must have certain scopes.</p>

<p>Available scopes for Things:</p>

<ul>
<li>connctd.connector</li>
<li>connctd.things.read</li>
</ul>

<aside class="notice">
  When doing requests against our things endpoint you have to pass two headers for a successful request handling:
    <ul>
      <li>Authorization:Bearer -your token-</li>
      <li>X-External-Subject-Id:-any id (e.g. customer id) generated by your app-</li>
    </ul>
</aside>

<h2 id="create-thing">Create Thing</h2>

<blockquote>
<p><strong>Request</strong><br>
POST https://api.connctd.io/api/v1/things<br>
<em>Headers:</em><br>
&nbsp;Content-Type:application/json<br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> see below<br></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;unique-thing-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;human readable name&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"manufacturer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;human readbale manufacturer name&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"displaytype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;hint for display purposes&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"maincomponentid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;id of the main component&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"attributes"</span><span class="p">:[{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"&lt;attribute name&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="s2">"&lt;attribute value&gt;"</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="s2">"components"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;thing unique id of component&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;human readable name of component&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"componenttype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;type of the component&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"capabilities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"&lt;one ore more capabaliies&gt;"</span><span class="p">],</span><span class="w">
      </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;component unique name of property&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string representation of the value&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;short name of unit of measurement&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;data type of value (NUMBER,STRING,BOOLEAN)&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"propertyType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string defining meaning of property like e.g. HUMIDITY&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"affectedBy"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"href"</span><span class="p">:</span><span class="s2">"&lt;url to action modifying this property&gt;"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;component unique name of action&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;parameter name&gt;"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;type of parameter(NUMBER,STRING or BOOLEAN&gt;"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">   
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 201<br>
<em>Body:</em> Id of newly created thing. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f6088362-a864-4834-89eb-d9e4dafbaefe"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>To add a Thing you need to acquire a token with the scope <code class="prettyprint">connctd.connector</code> through the OAuth2
process. After this you are able to create Things with the following request</p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<aside class="notice">The Thing-ID needs to be unique across all Things in our API. Therefore it is
possible that the Thing-ID is changed by our backend. The actual Thing-ID is returned in case of 
success.</aside>

<h2 id="retrieve-things">Retrieve things</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/things<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> List of thing references. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/things/1376f734-dbfc-486d-b264-f62d3ff88579"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all things the subject is owner of. Be aware that this list does NOT contain things that are shared via policies with the subject.</p>

<p>Required scope: <code class="prettyprint">connctd.things.read</code></p>

<h2 id="retrieve-thing">Retrieve thing</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/things/-thingid-<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> emptybr&gt;</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> Thing. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"177e3f1a-ef98-4898-b277-b6b392720be9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TutorialDummyThing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"manufacturer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tutorial app"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AVAILABLE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"displayType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LAMP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mainComponentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lamp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"componentLinks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/things/177e3f1a-ef98-4898-b277-b6b392720be9/components/lamp"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves a single thing.</p>

<p>Required scope: <code class="prettyprint">connctd.things.read</code></p>

<h2 id="retrieve-thing-component">Retrieve thing component</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/things/-thingid-/components/-componentid-<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> Thing component. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lamp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lamp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"componentType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LAMP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"capabilities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"SWITCHABLE"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"propertyLinks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/things/177e3f1a-ef98-4898-b277-b6b392720be9/components/lamp/properties/on"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"setOn"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BOOLEAN"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves the component of a thing.</p>

<p>Required scope: <code class="prettyprint">connctd.things.read</code></p>

<h2 id="retrieve-component-property">Retrieve component property</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/things/-thingid-/components/-componentid-/properties/-propertyName-<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> Component property. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ONOFF"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BOOLEAN"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastUpdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-23T14:10:53Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"propertyType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATE"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves the property of a component.</p>

<p>Required scope: <code class="prettyprint">connctd.things.read</code></p>

<h2 id="trigger-action-request">Trigger action request</h2>

<blockquote>
<p><strong>Request</strong><br>
POST https://api.connctd.io/api/v1/things/-thingid-/components/-componentid-/actions/-actionName-<br>
<em>Headers:</em><br>
&nbsp;Content-Type:application/json<br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> see below<br></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"on"</span><span class="p">:</span><span class="s2">"true"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 201<br>
<em>Body:</em> Thing component. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ebfc9fa6-5eb6-4217-bde5-3439797c4577"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMPLETED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deadline"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-30T15:00:08.941380198Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Used to trigger actions offered by a component. The content of the body depends on the action parameters which can be found in the action description of the corresponding thing component. Action requests will be sent to the callback urls corresponding to the connector/app that has created the app (<em>see Apps-&gt;Register a callback url</em>).</p>

<p>Required scope: <code class="prettyprint">connctd.things.action</code></p>

<h2 id="update-thing-status">Update thing status</h2>

<blockquote>
<p><strong>Request</strong><br>
PATCH <em>Url:</em> https://api.connctd.io/api/v1/things/-thingid-<br>
<em>Headers:</em><br>
&nbsp;Content-Type:application/json<br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> see below<br></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AVAILABLE"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 204<br>
<em>Body:</em> Empty body</p>
</blockquote>

<p>Allows you to update the state of a thing. Allowed values are &ldquo;AVAILABLE&rdquo;, &ldquo;UNAVAILABLE&rdquo; and &ldquo;UNKNOWN&rdquo;</p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<h2 id="update-thing-property">Update thing property</h2>

<blockquote>
<p><strong>Request</strong><br>
PUT https://api.connctd.io/api/v1/things/-thingid-/components/-componentid-/properties/-propertyname-<br>
<em>Headers:</em><br>
&nbsp;Content-Type:application/json<br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> see below<br></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xyz"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> Empty body</p>
</blockquote>

<p>This endpoint lets you update a property of a Thing you created. The supplied value must be a valid representation of the property type of this property.</p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<h2 id="delete-thing">Delete thing</h2>

<blockquote>
<p><strong>Request</strong><br>
DELETE <em>Url:</em> https://api.connctd.io/api/v1/things/-thingid-<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> Empty body</p>
</blockquote>

<p>If the supplied bearer token has the scope <code class="prettyprint">connctd.connector</code> and the Thing with the specified
id was created by the application belongig to the bearer token, this request will delete the 
specified Thing.</p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

          <h1 id="connectors">Connectors</h1>

<p>There are two ways on how things can be added to an external subjects thing list: You can either <a href="#register-an-app">register</a> and write your own app and use the <a href="#create-thing">create thing</a> endpoint and/or you can make use of so called connectors.
Basically a connector can be understood as a piece of code which connects a remote technology and takes care of transforming foreign domain entities into things. Since remote technologies often require different configurations and connectors probably need to run for a couple of users (external subjects) we have split up the concept of a connector into two separate entities:</p>

<ul>
<li><p><strong>Connector Instance</strong> Can be seen as a preconfiguration for each connector client. As a developer, you can create for each technology exactly one connector instance. This connector instance can have a configuration depending on the requirements of the specific technology. For example if you would like to make use of our OpenWeatherMap connector you need to pass a so called AppKey when creating the connector instance. Otherwise the instance creation will fail. This AppKey can be retrieved when registering at openweathermap.com. As soon as you have created the connector instance you can then create as many connector clients as you wish. The created connector clients will then make use of the previously created connector instance.</p></li>
<li><p><strong>Connector Client</strong> A connector client is the actual running piece of code which for example polls a remote api and abstracts the results into things. You can not create connector clients for a &ldquo;technology X&rdquo; if there does not exist the corresponding connector instance for &ldquo;technology X&rdquo;. Just as a side note: In contrast to a connector instance which runs only for a specific developer account the creation of a connector client will only succeed if you pass the header field &ldquo;X-External-Subject-Id&rdquo;. This parameter is internally required by the connector client in order to assign the generated things to the appropriate external subject thing list. </p></li>
</ul>

<h2 id="retrieve-connector-descriptions">Retrieve connector descriptions</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/connectors/descriptions<br>
<em>Headers:</em> none<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> List of connector descriptions. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"netatmo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netatmo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sample_instance_configuration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"connector_type_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"netatmo"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"configuration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"def"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"origin_callback_uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:9999/callback"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"sample_client_configuration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"connector_type_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"netatmo"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint returns a list of all available connectors including their connector type_ids as well as sample client and instance configurations.</p>

<p>Required scope: none</p>

<h2 id="create-connector-instance">Create connector instance</h2>

<blockquote>
<p><strong>Request</strong><br>
POST https://api.connctd.io/api/v1/connectors/instances<br>
<em>Headers:</em><br>
&nbsp;Content-Type:application/json<br>
&nbsp;Authorization:YOUR TOKEN<br>
<em>Body:</em> see below<br></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"connector_type_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"netatmo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"configuration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"origin_callback_uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://...."</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 201<br>
<em>Body:</em> Id of newly created instance. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d79b399-c3e1-4706-b4c5-f36826430233"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Creates a new connector instance. Please note: the value of the configuration field depends on the connector type (technology). You can only create one instance per connector_type_id. Otherwise 409 (conflict) is returned.  </p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<h2 id="retrieve-connector-instances">Retrieve connector instances</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/connectors/instances<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> List of instances. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/connectors/instances/1d79b399-c3e1-4706-b4c5-f36826430233"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of links to all connector instances.  </p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<h2 id="retrieve-connector-instance">Retrieve connector instance</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/connectors/instances/-instanceId-<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> Specific instance. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d79b399-c3e1-4706-b4c5-f36826430233"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clients"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/connectors/clients/d202e1a7-20a2-4581-9630-551dbe39d888"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"connector"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/connectors/descriptions/2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Fetches a specific instance. The json object holds a reference to the connector description as well as a list of all clients that are using this instance </p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<h2 id="delete-connector-instance">Delete connector instance</h2>

<blockquote>
<p><strong>Request</strong><br>
DELETE https://api.connctd.io/api/v1/connectors/instances/-instanceId-<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 204<br>
<em>Body:</em> empty</p>
</blockquote>

<p>Removes a connector instance. A connector instance can only be removed if all clients that are attached to it are removed. Otherwise a 409 is returend.</p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<h2 id="create-connector-client">Create connector client</h2>

<blockquote>
<p><strong>Request</strong><br>
POST https://api.connctd.io/api/v1/connectors/clients<br>
<em>Headers:</em><br>
&nbsp;Content-Type:application/json<br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> see below<br></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"connector_type_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"netatmo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"configuration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"anyField"</span><span class="p">:</span><span class="s2">"abc"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 201 OR 303<br>
<em>Body:</em> Id of newly created client or redirect having location header. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d202e1a7-20a2-4581-9630-551dbe39d888"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Creates a new connector client. Again the configuration of the client depends on the requirements of the connector. The response status code can be either 201 or 303 (redirect) and depends on the connector type. In both cases the connector client was created. If a 303 is returned the browser of the client needs to be redirected to the location which is mentioned within the location-header-field of the response. A 409 is returned if a client for given X-External-Subject-Id &amp; connector_type_id was already created. A 400 is returned if there exists no appropriate connector instance.   </p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<h2 id="retrieve-connector-clients">Retrieve connector clients</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/connectors/clients<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> List of clients. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/connectors/clients/d202e1a7-20a2-4581-9630-551dbe39d888"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of links to all connector clients that belong to given X-External-Subject-Id.  </p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<h2 id="retrieve-connector-client">Retrieve connector client</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/connectors/clients/-clientId-<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> Specific client. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d202e1a7-20a2-4581-9630-551dbe39d888"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"instance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/connectors/instances/1d79b399-c3e1-4706-b4c5-f36826430233"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"connector"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/connectors/descriptions/2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"mappings"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"connector_thing_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"thing_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56ed33d9-bd1a-4650-9264-d996132098de"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STARTED"</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Fetches a specific client for a given X-External-Subject-Id. The json object holds references to the connector description and corresponding connector instance. Within the mappings field a list of key values pairs is stored. It shows which things were create by the given client and to which id they are mapped internally.</p>

<p>Status might be Starting, Started or Error  </p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<h2 id="delete-connector-client">Delete connector client</h2>

<blockquote>
<p><strong>Request</strong><br>
DELETE https://api.connctd.io/api/v1/connectors/clients/-clientId-<br>
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
&nbsp;X-External-Subject-Id:SUBJECT_ID<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 204<br>
<em>Body:</em> empty</p>
</blockquote>

<p>Removes a connector client. Removing a connector client will also lead to the removal of the corresponding things that were created by this connector client.</p>

<p>If the removal of the corresponding things fails a 500 is returned and the connector client remains active. Try to remove the client again if that happens.</p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<h2 id="get-connector-service-callback-url">Get connector service callback url</h2>

<blockquote>
<p><strong>Request</strong><br>
GET https://api.connctd.io/api/v1/connectors/callbackurl
<em>Headers:</em><br>
&nbsp;Authorization:YOUR TOKEN<br>
<em>Body:</em> empty<br></p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200<br>
<em>Body:</em> Callback url</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/connectors/actions/1eb8b9f..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Connector clients might create things with actions. If you are trying to trigger such an action it will fail unless you have provided a callback url to our backend. The callback url tells our backend to which endpoint it has to route the action request since only the thing creating service or app knows how to handle the action request. Since the connector service has created the thing you have to register the callback url you get from the request shown on the right hand side. <a href="#register-a-callback-url">Here</a> you can read how to register the callback url.</p>

          <h1 id="apps">Apps</h1>

<p>Whenever you would like to build your own application which makes use of things, units or connectors you first need
to register that app at our platform. By registering an app you will get a client_id and client_secret which can be
used (depending on the used oauth2 flow) to retrieve an access token. This token is required when working with our api as it allows our platform to match your requests to your app. Head over to our developer center in order to create your app.</p>

<h2 id="register-a-callback-url">Register a callback url</h2>

<blockquote>
<p><strong>Request</strong><br>
POST https://api.connctd.io/api/v1/actions/callback/register<br>
<em>Headers:</em><br>
&nbsp;Content-Type:application/json<br>
&nbsp;Authorization:APP TOKEN<br>
<em>Body:</em> see below<br> </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"CallbackUrl"</span><span class="p">:</span><span class="s2">"https://remote-service-url"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response</strong><br>
<em>Code:</em> 200</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<p>This request stores a system wide callback url for all action requests that are related to this app. This is important whenever an app creates things that contains actions. As soon as a user triggers any of these actions by performing an action request the request is forwarded to the given callback url. Please note: if you are using our connector service you have to register your app specific connector callback url with this request. <a href="#get-connector-service-callback-url">Here</a> you can read how to get one.</p>

          <h1 id="scopes">Scopes</h1>

<p>Scopes are attached to access tokens and specify the actions that can be performed on resources.</p>

<table><thead>
<tr>
<th>Scope</th>
<th>Allows requesting entity to&hellip;</th>
</tr>
</thead><tbody>
<tr>
<td>connctd.units.read</td>
<td>query units</td>
</tr>
<tr>
<td>connctd.units.admin</td>
<td>create, modify and remove units</td>
</tr>
<tr>
<td>connctd.things.read</td>
<td>query things</td>
</tr>
<tr>
<td>connctd.things.action</td>
<td>create actions requests</td>
</tr>
<tr>
<td>connctd.connector</td>
<td>create, read, modify and remove things</td>
</tr>
<tr>
<td>connctd.core</td>
<td>Can&rsquo;t be requested by oauth 2 apps. Automatically assigned to user token retrieved via /api/v1/auth/login.</td>
</tr>
</tbody></table>

          <h1 id="errors">Errors</h1>

<p>The connctd.io API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your token or credentials can&rsquo;t be verified</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The provided token does not have sufficient permissions for the requested action</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified Unit or Thing could not be found</td>
</tr>
<tr>
<td>409</td>
<td>Conflict &ndash; Resource already exists or conflicts with another resource</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error response object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"404"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"THING_DOESNT_EXIST"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The requested Thing doesn't exist"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"more_info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://docs.connctd.io/errors/thing_doesnt_exist"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
