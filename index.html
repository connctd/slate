<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://api.connctd.io/register'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the connctd.io API. This REST based API provides functionality to create, manage and update Things and
other resources in the world of IoT.</p>

<h1 id="authentication">Authentication</h1>

<p>To authenticate against our API you need verify your credentials. In return you receive a token identifying you as
the resource owner (user), granting you a certain amount of permissions.</p>

<h2 id="login">Login</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/auth/login <em>Content-Type:</em> application/json <em>Body:</em> see below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"yourmail"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"password"</span><span class="p">:</span><span class="s2">"yourpassword"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> Token und further information. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NpZCI6I....."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"546"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4bbb4e40-99ea-43c6-9447-a4c67f563e1c"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The response will either have the status code 200 in case of success or 401 in case the 
supplied credentials can&rsquo;t be verified. In error cases a default error object is
returned in the body.</p>

<h2 id="logout">Logout</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/auth/logout <em>Content-Type:</em> application/json <em>Body:</em> empty</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> Empty</p>
</blockquote>

<p>Invalidates the access token. You have to specify your access token within <em>Authorization</em> header field.</p>

          <h1 id="oauth-2-0">OAuth 2.0</h1>

<p>The connctd platform acts as a oauth2 provider implementing all flows described in https://tools.ietf.org/html/rfc6749#section-4 except the &ldquo;Resource Owner Password Credentials Grant&rdquo;. The following two sections mainly focus on the Authorization Code Grant Flow as there already exist hundreds of good oauth2 tutorials which can be read in case you need another flow.</p>

<h2 id="requesting-authorization">Requesting Authorization</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/oauth2/auth?state=abcdefghiklmnop&amp;client_id=1bd2f1a3-e72d-4606-b82b-86d1054f3bd4&amp;redirect_uri=https%3A%2F%2Fabc%2Fauth%2Fcallback&amp;response_type=code&amp;scope=connctd.units.read+connctd.things.read+connctd.connector+offline</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 301</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<p>This request will redirect the user to the consent screen. You have to replace the example parameter values with the corresponding values of your app. A detailed parameter description can be found <a href="https://tools.ietf.org/html/rfc6749#section-4.1.1">here</a>.</p>

<h2 id="requesting-a-token">Requesting a token</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/oauth2/token <em>Content-Type:</em> application/x-www-form-urlencoded</p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="n">grant_type</span><span class="o">=</span><span class="n">authorization_code</span><span class="o">&amp;</span><span class="n">code</span><span class="o">=-</span><span class="n">auth</span> <span class="n">code</span> <span class="n">from</span> <span class="n">reply</span> <span class="n">of</span> <span class="n">prev</span> <span class="n">request</span><span class="o">-&amp;</span>
<span class="n">redirect_uri</span><span class="o">=</span><span class="n">http</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">2</span><span class="n">F</span><span class="o">%</span><span class="mi">2</span><span class="n">Fabc</span><span class="o">.</span><span class="na">com</span><span class="o">%%</span><span class="mi">2</span><span class="n">Fauth</span><span class="o">%</span><span class="mi">2</span><span class="n">Fcallback</span><span class="o">&amp;</span><span class="n">client_id</span><span class="o">=</span><span class="mi">1</span><span class="n">bd2f1a3</span><span class="o">-</span><span class="n">e72d</span><span class="o">-</span><span class="mi">4606</span><span class="o">-</span><span class="n">b82b</span><span class="o">-</span><span class="mi">86</span><span class="n">d1054f3bd4</span>
</code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"access_token"</span><span class="p">:</span><span class="s2">"..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refresh_token"</span><span class="p">:</span><span class="s2">"..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"scope"</span><span class="p">:</span><span class="s2">"..."</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This request requires the authentication of the app by specifying an Authorization header with value <code class="prettyprint">Basic base64_encode(client_id:client_secret)</code>
The body will contain a url encoded form with the fields <em>grant_type</em>, <em>code</em>, <em>redirect_uri</em> and <em>client_id</em>  </p>

<h2 id="requesting-an-app-token">Requesting an app token</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/oauth2/token <em>Content-Type:</em> application/x-www-form-urlencoded <em>Authorization:</em> Basic &mdash;&mdash;</p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="n">grant_type</span><span class="o">=</span><span class="n">client_credentials</span><span class="o">&amp;</span><span class="n">scope</span><span class="o">=</span><span class="n">connctd</span><span class="o">.</span><span class="na">connector</span>
</code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"access_token"</span><span class="p">:</span><span class="s2">"..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This is the so called client credentials grant flow and allows an app to fetch an acccess token that is NOT user related. This is required for e.g. registering an app callback (see apps)</p>

<p>Authorization header value needs to be of format: base64_encode(client_id:client_secret)</p>

          <h1 id="apps">Apps</h1>

<p>connctd implements the OAuth 2.0 specification. By doing so developers can write and host their own apps that can obtain limited access to resources on behalf of the user. 
Such an app (in OAuth terms it is called client) could for example list the units or things of an user. These apps do not just consume resources they might also deliver new resources like things. A common use case for connctd apps are apps that mediate between our platform and another, foreign technology. We often name those apps &ldquo;connector&rdquo; as they are translating from a remote domain model into our thing concept.
If you are unfamiliar with the OAuth 2.0 framework we highly recommend reading the <a href="https://tools.ietf.org/html/rfc6749">specification</a>. In case you are uncertain regarding some parameters we also recommend reading the documentation of <a href="http://docs.hydra13.apiary.io/#reference/oauth2">hydra</a> - the framework we are using under the hood for OAuth 2.0 support.</p>

<h2 id="register-an-app">Register an app</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/apps <em>Content-Type:</em> application/json <em>Body:</em> see below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Name of application"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Any description"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"homepage"</span><span class="p">:</span><span class="s2">"https://abc.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"redirecturis"</span><span class="p">:[</span><span class="s2">"https://abc.com/auth/callback"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"policyuri"</span><span class="p">:</span><span class="s2">"https://abc.com/policy"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tosuri"</span><span class="p">:</span><span class="s2">"https://abc.com/tos"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"logouri"</span><span class="p">:</span><span class="s2">"https://abc.com/logo.png"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"scopes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"connctd.units.read"</span><span class="p">,</span><span class="s2">"connctd.units.admin"</span><span class="p">,</span><span class="s2">"connctd.connector"</span><span class="p">,</span><span class="s2">"connctd.things.read"</span><span class="p">,</span><span class="s2">"offline"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"public"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"visible"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tags"</span><span class="p">:[{</span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Smart Home"</span><span class="p">}],</span><span class="w">
  </span><span class="s2">"contacts"</span><span class="p">:[</span><span class="s2">"your.mail@mail.com"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"responsetypes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"token"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id_token"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"granttypes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"authorization_code"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"implicit"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refresh_token"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"client_credentials"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 201 <em>Body:</em> Newly created application. See example below. </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f62794f6-659d-439a-b19b-45e6cf705cef"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f62794f6-659d-439a-b19b-45e6cf705cef"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NWx.W-B&gt;G/!u"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Registers a new application</p>

<p><strong>redirect_uris:</strong> Array of redirect uris that are later on used in various flows</p>

<p><strong>scope:</strong> Space separated list of scopes. The offline scope is necessary if a refresh token should be later on generated. You can see in a list of all available scopes within the <em>scopes</em> section</p>

<p><strong>public:</strong> You have to set this to true if there exists the possibility of client secret disclosure (e.g. Android app might be decompiled). Apps with setting public=true will not be able to register action callback urls since the client_credentials grant type flow is required for that but which is deactivated due to security concerns with public apps.</p>

<p><strong>visible:</strong> If set to true any user can see your app (e.g. in an app store). If set to false only you can see the app.</p>

<p><strong>tags:</strong> Used to search for apps with specific meanings (e.g. Smart Home, Netatmo, Assisted living)</p>

<p>As a response you will get back a client_id, id and a client_secret. The client_secret needs to be stored as it can&rsquo;t be retrieved again. Right now the id of the created client (used for managing clients) is equal to the oauth2 client_id (required for OAuth2 flow).</p>

<p>Required scope: <code class="prettyprint">connctd.core</code></p>

<h2 id="retrieve-apps">Retrieve apps</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/apps</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> List of apps. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f62794f6-659d-439a-b19b-45e6cf705cef"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Name of application"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Any description"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"public"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"added"</span><span class="p">:</span><span class="w"> </span><span class="mi">1497866109</span><span class="p">,</span><span class="w">
      </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smart Home"</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="err">...</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all apps </p>

<p>Required scope: <code class="prettyprint">connctd.core</code></p>

<h2 id="retrieve-an-app">Retrieve an app</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/apps/f62794f6-659d-439a-b19b-45e6cf705cef</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> Single app description. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f62794f6-659d-439a-b19b-45e6cf705cef"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Name of application"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Any description"</span><span class="p">,</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves a specific app</p>

<p>Required scope: <code class="prettyprint">connctd.core</code></p>

<h2 id="add-tag">Add tag</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/apps/f62794f6-659d-439a-b19b-45e6cf705cef/tags <em>Body:</em> see below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"My new tag"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 201</p>
</blockquote>

<p>Adds a new tag to the tag list of an app</p>

<p>Required scope: <code class="prettyprint">connctd.core</code></p>

<h2 id="delete-a-tag">Delete a tag</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> DELETE <em>Url:</em> https://api.connctd.io/api/v1/apps/1bd2f1a3-e72d-4606-b82b-86d1054f3bd4/tags/TAGNAME</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 204</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<p>Removes a tag</p>

<h2 id="delete-an-app">Delete an app</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> DELETE <em>Url:</em> https://api.connctd.io/api/v1/apps/1bd2f1a3-e72d-4606-b82b-86d1054f3bd4</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 204</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<p>Removes an app by client_id</p>

<p>Required scope: <code class="prettyprint">connctd.core</code></p>

<h2 id="register-a-callback-url">Register a callback url</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/actions/callback/register <em>Authorization:</em> Bearer app-token </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"CallbackUrl"</span><span class="p">:</span><span class="s2">"https://remote-service-url"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<p>This request stores a system wide callback url for all action requests that are related to this app. This is important whenever an app creates things that contain actions. As soon a user triggers any of these actions by performing an action request the request is forwarded to the given callback url. 
The header requires a valid app token. See section oauth2 -&gt; Register an app token for more information about gaining app tokens</p>

          <h1 id="units">Units</h1>

<p>A unit is a primitive container that gives developers the possibility to group things and to put them into a context. Since a unit can reference other units (children and parents) even complex structures of the real world can be modeled like for example a city with it&rsquo;s streets and buildings.</p>

<aside class="notice">
    When doing requests against our units endpoint you have to pass two headers for a successful request handling:
        * Authorization:Bearer -your token-
        * X-External-Subject-Id:-any id (e.g. customer id) generated by your app-
</aside>

<h2 id="model">Model</h2>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Generated id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Name of unit&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Type of unit&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"things"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"href"</span><span class="p">:</span><span class="s2">"https://api.connctd.io/api/v1/things/ab..."</span><span class="p">}],</span><span class="w">
  </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"tuple(name,json object)"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"children"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"href"</span><span class="p">:</span><span class="s2">"https://api.connctd.io/api/v1/units/xy..."</span><span class="p">}],</span><span class="w">
  </span><span class="s2">"parents"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"href"</span><span class="p">:</span><span class="s2">"https://api.connctd.io/api/v1/units/qw..."</span><span class="p">}],</span><span class="w">
  </span><span class="s2">"subjects"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"href"</span><span class="p">:</span><span class="s2">"https://api.connctd.io/api/v1/subjects/98..."</span><span class="p">}],</span><span class="w">
  </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65...."</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>On the right hand side you can see an exemplary unit. We also offer a <a href="https://github.com/connctd/future-platform/blob/master/domain/unit-schema.json">unit json schema</a> which allows json object validation.</p>

<p>The unit <strong>type</strong> helps to interprete the meaning of a unit. It is meant to be kept very generic like &ldquo;ROOM&rdquo; OR &ldquo;BUILDING&rdquo; instead of using too meaningful types like &ldquo;BATHROOM&rdquo;. If your app requires more information about a unit it is a good way to describe them within the <strong>properties</strong>. Those properties can hold arbitrary information since json objects can be passed. Even json ld is allowed to semantically enrich them. A json ld processor takes care of object validation.</p>

<p>The values of the properties <strong>parents</strong>, <strong>children</strong>, <strong>subjects</strong> and <strong>things</strong> are lists holding references to other resources.</p>

<h2 id="create-unit">Create unit</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/units <em>Content-Type:</em> application/json <em>Body:</em> see below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My House"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOUSE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"address"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"number"</span><span class="p">:</span><span class="s2">"25"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street"</span><span class="p">:</span><span class="s2">"..."</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 201 <em>Body:</em> Id of newly created unit. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e1de3bcf-7699-4838-97ec-635618fb3caa"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Creates an empty unit. Additional information like parents, children or subjects can be added by subsequent calls.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin or connctd.core</code></p>

<h2 id="retrieve-units">Retrieve units</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/units</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> Array of units. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/units/37cbbcfb-9a5c-4931-aa55-f73ff0af0e80"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<p>Retrieves a list of resource links to units the user belongs to</p>

<p>Required scope: <code class="prettyprint">connctd.units.read or connctd.core</code></p>

<h2 id="retrieve-unit">Retrieve unit</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> A single unit. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e1de3bcf-7699-4838-97ec-635618fb3caa"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My House"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOUSE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"things"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"details"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"number"</span><span class="p">:</span><span class="mi">25</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street"</span><span class="p">:</span><span class="s2">"..."</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"children"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"parents"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"subjects"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
</span><span class="p">}</span><span class="w">   
</span></code></pre>
<p>Retrieves a unit by id</p>

<p>Required scope: <code class="prettyprint">connctd.units.read or connctd.core</code></p>

<h2 id="delete-unit">Delete unit</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> DELETE <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 204</p>
</blockquote>

<p>Removes a unit by its id.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin or connctd.core</code></p>

<h2 id="get-unit-references">Get unit references</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/-parents|children-</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> List of unit references. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/units/1376f734-dbfc-486d-b264-f62d3ff88579"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of unit references.</p>

<p>Required scope: <code class="prettyprint">connctd.units.read or connctd.core</code></p>

<h2 id="add-unit-reference">Add unit reference</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/-parents|children- <em>Content-Type:</em> application/json <em>Body:</em> Id of parent/child unit. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1376f734-dbfc-486d-b264-f62d3ff88579"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 201</p>
</blockquote>

<p>Adds a reference to another unit. The reference also appears within the referenced unit either as parent or child reference.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin or connctd.core</code></p>

<h2 id="remove-unit-reference">Remove unit reference</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> DELETE <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/-parents|children- <em>Content-Type:</em> application/json <em>Body:</em> Id of parent/child unit. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1376f734-dbfc-486d-b264-f62d3ff88579"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 204</p>
</blockquote>

<p>Removes a reference to another unit. The reference also disappears from within the referenced unit.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin or connctd.core</code></p>

<h2 id="get-subject-references">Get subject references</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/subjects</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> List of subject references. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/subjects/123-55664-aab-2456"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves list of subject references</p>

<p>Required scope: <code class="prettyprint">connctd.units.read or connctd.core</code></p>

<aside class="note">
Subject references can be used to assign (external) subject ids to a specific unit. As soon a one external subject (lets say for example S1) is assigned to the unit of another subject (lets say S2), the result list when retrieving the units of S1 will contain the unit of S2.   
</aside>

<h2 id="add-subject-reference">Add subject reference</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/subjects <em>Content-Type:</em> application/json <em>Body:</em> Id of subject. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"any id your application is working with - e.g. customer id"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 201</p>
</blockquote>

<p>Adds a reference to a subject.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin or connctd.core</code></p>

<h2 id="remove-subject-reference">Remove subject reference</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> DELETE <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/subjects <em>Content-Type:</em> application/json <em>Body:</em> Id of subject. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123-55664-aab-2456"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 204</p>
</blockquote>

<p>Removes a reference to a subject.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin or connctd.core</code></p>

<h2 id="get-properties">Get properties</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/properties</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> List of properties. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"address"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all properties</p>

<p>Required scope: <code class="prettyprint">connctd.units.read or connctd.core</code></p>

<h2 id="get-property">Get property</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/properties/-propertyName-</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> A single property. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Read a specific property</p>

<p>Required scope: <code class="prettyprint">connctd.units.read or connctd.core</code></p>

<h2 id="add-property">Add property</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/properties <em>Content-Type:</em> application/json <em>Body:</em> New property. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyNewProperty"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="err">-any</span><span class="w"> </span><span class="err">json(-ld)-</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 201</p>
</blockquote>

<p>Adds a new property.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin or connctd.core</code></p>

<h2 id="update-property">Update property</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> PUT <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/properties <em>Content-Type:</em> application/json <em>Body:</em> New property value. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyNewProperty"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 204</p>
</blockquote>

<p>Updates a property.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin or connctd.core</code></p>

<h2 id="delete-property">Delete property</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> DELETE <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/properties/-propertyName-</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<p>Removes a property from property set</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin or connctd.core</code></p>

<h2 id="get-thing-references">Get thing references</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/things</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> List of thing references. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/things/591327fe-5c1a-4dbb-a96b-9bef4de0a273"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all thing references</p>

<p>Required scope: <code class="prettyprint">connctd.units.read or connctd.core</code></p>

<h2 id="add-thing-reference">Add thing reference</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/things <em>Content-Type:</em> application/json <em>Body:</em> Id of thing. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"591327fe-5c1a-4dbb-a96b-9bef4de0a273"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 201</p>
</blockquote>

<p>Adds a reference to a things.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin or connctd.core</code></p>

<h2 id="remove-thing-reference">Remove thing reference</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> DELETE <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/things <em>Content-Type:</em> application/json <em>Body:</em> Id of thing. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"591327fe-5c1a-4dbb-a96b-9bef4de0a273"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 204</p>
</blockquote>

<p>Removes a reference to a thing.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin or connctd.core</code></p>

          <h1 id="things">Things</h1>

<p>Things in our API are abstract representations of specific IoT related devices. They can be created, deleted
and managed with our API. Depending on the requested action the supplied token must have certain scopes.</p>

<p>Available scopes for Things:</p>

<ul>
<li>connctd.connector</li>
<li>connctd.things.read</li>
</ul>

<aside class="notice">
    When doing requests against our things endpoint you have to pass two headers for a successful request handling:
        * Authorization:Bearer -your token-
        * X-External-Subject-Id:-any id (e.g. customer id) generated by your app-
</aside>

<h2 id="create-thing">Create Thing</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/things <em>Content-Type:</em> application/json <em>Body:</em> see below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;unique-thing-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;human readable name&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"manufacturer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;human readbale manufacturer name&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"displaytype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;hint for display purposes&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"maincomponentid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;id of the main component&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"components"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;thing unique id of component&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;human readable name of component&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"componenttype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;type of the component&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"capabilities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"&lt;one ore more capabaliies&gt;"</span><span class="p">],</span><span class="w">
      </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;component unique name of property&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string representation of the value&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;short name of unit of measurement&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;data type of value (NUMBER,STRING,BOOLEAN)&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"propertyType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string defining meaning of property like e.g. HUMIDITY&gt;"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;component unique name of action&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;parameter name&gt;"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;type of parameter(NUMBER,STRING or BOOLEAN&gt;"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">   
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 201 <em>Body:</em> Id of newly created thing. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f6088362-a864-4834-89eb-d9e4dafbaefe"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>To add a Thing you need to acquire a token with the scope <code class="prettyprint">connctd.connector</code> through the OAuth2
process. After this you are able to create Things with the following request</p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<aside class="notice">The Thing-ID needs to be unique across all Things in our API. Therefore it is
possible that the Thing-ID is changed by our backend. The actual Thing-ID is returned in case of 
success.</aside>

<h2 id="retrieve-things">Retrieve things</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/things</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> List of thing references. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/things/1376f734-dbfc-486d-b264-f62d3ff88579"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all things the subject is owner of. Be aware that this list does NOT contain things that are shared via policies with the subject.</p>

<p>Required scope: <code class="prettyprint">connctd.things.read or connctd.core</code></p>

<h2 id="retrieve-thing">Retrieve thing</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/things/-thingid-</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> Thing. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"177e3f1a-ef98-4898-b277-b6b392720be9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TutorialDummyThing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"manufacturer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tutorial app"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AVAILABLE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"displayType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LAMP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mainComponentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lamp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"componentLinks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/things/177e3f1a-ef98-4898-b277-b6b392720be9/components/lamp"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves a single thing.</p>

<p>Required scope: <code class="prettyprint">connctd.things.read or connctd.core</code></p>

<h2 id="retrieve-thing-component">Retrieve thing component</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/things/-thingid-/components/-componentid-</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> Thing component. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lamp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lamp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"componentType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LAMP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"capabilities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"SWITCHABLE"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"propertyLinks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.connctd.io/api/v1/things/177e3f1a-ef98-4898-b277-b6b392720be9/components/lamp/properties/on"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"setOn"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BOOLEAN"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves the component of a thing.</p>

<p>Required scope: <code class="prettyprint">connctd.things.read or connctd.core</code></p>

<h2 id="retrieve-component-property">Retrieve component property</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/things/-thingid-/components/-componentid-/properties/-propertyName-</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> Component property. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ONOFF"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BOOLEAN"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastUpdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-23T14:10:53Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"propertyType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATE"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves the property of a component.</p>

<p>Required scope: <code class="prettyprint">connctd.things.read or connctd.core</code></p>

<h2 id="trigger-action-request">Trigger action request</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/things/-thingid-/components/-componentid-/actions/-actionName-</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"on"</span><span class="p">:</span><span class="s2">"true"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 201 <em>Body:</em> Thing component. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ebfc9fa6-5eb6-4217-bde5-3439797c4577"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMPLETED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deadline"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-30T15:00:08.941380198Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Used to trigger actions offered by a component. The content of the body depends on the action parameters which can be found in the action description of the corresponding thing component. Action requests will be sent to the callback urls corresponding to the connector/app that has created the app (<em>see Apps-&gt;Register a callback url</em>).</p>

<p>Required scope: <code class="prettyprint">connctd.things.action</code></p>

<h2 id="update-thing-status">Update thing status</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> PATCH <em>Url:</em> https://api.connctd.io/api/v1/things/-thingid-</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AVAILABLE"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 204 <em>Body:</em> Empty body</p>
</blockquote>

<p>Allows you to update the state of a thing. Allowed values are &ldquo;AVAILABLE&rdquo;, &ldquo;UNAVAILABLE&rdquo; and &ldquo;UNKNOWN&rdquo;</p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<h2 id="update-thing-property">Update thing property</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> PUT <em>Url:</em> https://api.connctd.io/api/v1/things/-thingid-/components/-componentid-/properties/-propertyname-</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xyz"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> Empty body</p>
</blockquote>

<p>This endpoint lets you update a property of a Thing you created. The supplied value must be a valid representation of the property type of this property.</p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<h2 id="delete-thing">Delete thing</h2>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> DELETE <em>Url:</em> https://api.connctd.io/api/v1/things/-thingid-</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> Empty body</p>
</blockquote>

<p>If the supplied bearer token has the scope <code class="prettyprint">connctd.connector</code> and the Thing with the specified
id was created by the application belongig to the bearer token, this request will delete the 
specified Thing.</p>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

          <h1 id="scopes">Scopes</h1>

<p>Scopes are attached to access tokens and specify the actions that can be performed on resources.</p>

<table><thead>
<tr>
<th>Scope</th>
<th>Allows requesting entity to&hellip;</th>
</tr>
</thead><tbody>
<tr>
<td>connctd.units.read</td>
<td>query units</td>
</tr>
<tr>
<td>connctd.units.admin</td>
<td>create, modify and remove units</td>
</tr>
<tr>
<td>connctd.things.read</td>
<td>query things</td>
</tr>
<tr>
<td>connctd.things.action</td>
<td>create actions requests</td>
</tr>
<tr>
<td>connctd.connector</td>
<td>create, read, modify and remove things</td>
</tr>
<tr>
<td>connctd.core</td>
<td>Can&rsquo;t be requested by oauth 2 apps. Automatically assigend to user token retrieved via /api/v1/auth/login. Combines scopes connctd.policies.read, connctd.policies.admin, connctd.units.admin, connctd.units.read and connctd.things.read</td>
</tr>
</tbody></table>

          <h1 id="errors">Errors</h1>

<p>The connctd.io API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your token or credentials can&rsquo;t be verified</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The provided token does not have sufficient permissions for the requested action</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified Unit or Thing could not be found</td>
</tr>
<tr>
<td>409</td>
<td>Conflict &ndash; Resource already exists or conflicts with another resource</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error response object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"404"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"THING_DOESNT_EXIST"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The requested Thing doesn't exist"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"more_info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://docs.connctd.io/errors/thing_doesnt_exist"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
