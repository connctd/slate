<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://api.connctd.io/register'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the connctd.io API. This REST based API provides functionality to create, manage and update Things and
other resources in the world of IoT.</p>

<h1 id="authentication">Authentication</h1>

<p>To authenticate against our API you need verify your credentials. In return you receive a token identifying you as
the resource owner (user), granting you a certain amount of permissions.</p>

<h2 id="login">Login</h2>

<h3 id="http-requests">HTTP Requests</h3>

<p><code class="prettyprint">POST https://api.connctd.io/api/v1/auth/login</code></p>

<blockquote>
<p>Request body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"Email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"Password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pikaboo"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="http-response">HTTP Response</h3>

<p>The response with either have the status code 200 in case of success or 401 in case the 
supplied credentials can&rsquo;t be verified. In error cases a default error object is
returned in the body.</p>

<blockquote>
<p>Response body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"Token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xyz"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="logout">Logout</h2>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://api.connctd.io/api/v1/auth/logout</code></p>

<h2 id="oauth-2">OAuth 2</h2>

<p>In most cases you will interact with our API in the role of an OAuth2 authenticated application.
<code class="prettyprint">TODO add OAuth2 documentation</code>.</p>

          <h1 id="units">Units</h1>

<p>A unit is a primitive container that gives developers the possibility to group things and to put them into a context. Since a unit can reference other units (children and parents) even complex structures of the real world can be modeled like for example a city with it&rsquo;s streets and buildings. The type property of a unit not just gives a clue about its meaning, it also defines which properties a unit needs to have in order to be valid. By enforcing these properties even generic applications know how to handle unknown units.</p>

<h2 id="model">Model</h2>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Generated id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Name of unit&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Type of unit&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"things"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"&lt;Reference as plain string&gt;"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"tuple(name,value)"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"children"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"&lt;Reference as plain string&gt;"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"parents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"&lt;Reference as plain string&gt;"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"subjects"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"&lt;Reference as plain string&gt;"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Id of the owner&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>On the right hand side you can see an exemplary unit. We also offer a <a href="https://github.com/connctd/future-platform/blob/master/domain/unit-schema.json">unit json schema</a> which allows json object validation.</p>

<p>The unit <strong>type</strong> helps to interprete the meaning of a unit. Additionally it defines which properties need to be defined when creating the unit. The following table lists all available types and their corresponding, mandatory properties. Keep in mind that a unit is not restricted to those properties. As long as the mandatory properties are defined any further properties can be attached to it.</p>

<p>The values of the properties <strong>parents</strong>, <strong>children</strong>, <strong>subjects</strong> and <strong>things</strong> are lists that hold references to other resource.</p>

<table><thead>
<tr>
<th>Type</th>
<th>Properties</th>
</tr>
</thead><tbody>
<tr>
<td>CONTAINER</td>
<td>-</td>
</tr>
<tr>
<td>HOUSE</td>
<td>number</td>
</tr>
<tr>
<td>FLOOR</td>
<td>number</td>
</tr>
<tr>
<td>APARTMENT</td>
<td>number</td>
</tr>
<tr>
<td>ROOM</td>
<td>originX, originY, originZ, spanX, spanY, spanZ</td>
</tr>
</tbody></table>

<h2 id="create-unit">Create unit</h2>

<p>Creates an empty unit. Additional information like parents, children or subjects can be added by subsequent calls.</p>

<aside class="notice">
Please note that for every single unit request a valid access token is required
</aside>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/units <em>Content-Type:</em> application/json <em>Body:</em> see below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My House"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOUSE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"number"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="s2">"25"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 201 <em>Body:</em> Id of newly created unit. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e1de3bcf-7699-4838-97ec-635618fb3caa"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="retrieve-units">Retrieve units</h2>

<p>Retrieves a list of all accessible units</p>

<p>Required scope: <code class="prettyprint">connctd.units.read</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/units</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> Array of units. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e1de3bcf-7699-4838-97ec-635618fb3caa"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My House"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOUSE"</span><span class="p">,</span><span class="w">
    </span><span class="err">...</span><span class="w"> 
  </span><span class="p">},</span><span class="w"> </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<h2 id="retrieve-unit">Retrieve unit</h2>

<p>Retrieves a unit by id</p>

<p>Required scope: <code class="prettyprint">connctd.units.read</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> A single unit. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e1de3bcf-7699-4838-97ec-635618fb3caa"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My House"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOUSE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"things"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"children"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"parents"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"subjects"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
</span><span class="p">}</span><span class="w">   
</span></code></pre>
<h2 id="delete-unit">Delete unit</h2>

<p>Removes a unit by its id.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> DELETE <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200</p>
</blockquote>

<h2 id="get-unit-references">Get unit references</h2>

<p>Retrives a list of unit references.</p>

<p>Required scope: <code class="prettyprint">connctd.units.read</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/-parents|children-</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> List of unit references. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/units/1376f734-dbfc-486d-b264-f62d3ff88579"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<h2 id="add-unit-reference">Add unit reference</h2>

<p>Adds a reference to another unit. The reference also appears within the referenced unit either as parent or child reference.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/-parents|children- <em>Content-Type:</em> application/json <em>Body:</em> Id of parent/child unit. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1376f734-dbfc-486d-b264-f62d3ff88579"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 201</p>
</blockquote>

<h2 id="remove-unit-reference">Remove unit reference</h2>

<p>Removes a reference to another unit. The reference also disappears from within the referenced unit.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> DELETE <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/-parents|children- <em>Content-Type:</em> application/json <em>Body:</em> Id of parent/child unit. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1376f734-dbfc-486d-b264-f62d3ff88579"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200</p>
</blockquote>

<h2 id="get-subject-references">Get subject references</h2>

<p>Required scope: <code class="prettyprint">connctd.units.read</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/subjects</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> List of subject references. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/subjects/2"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<aside class="note">
Subject references can be used for identification and organizational puproses. They are are currently NOT callable. 
</aside>

<h2 id="add-subject-reference">Add subject reference</h2>

<p>Adds a reference to a subject.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/subjects <em>Content-Type:</em> application/json <em>Body:</em> Id of subject. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 201</p>
</blockquote>

<h2 id="remove-subject-reference">Remove subject reference</h2>

<p>Removes a reference to a subject.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> DELETE <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/subjects <em>Content-Type:</em> application/json <em>Body:</em> Id of subject. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200</p>
</blockquote>

<h2 id="get-properties">Get properties</h2>

<p>Retrieves a list of all properties</p>

<p>Required scope: <code class="prettyprint">connctd.units.read</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/properties</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> List of properties. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<h2 id="get-property">Get property</h2>

<p>Read a specific property</p>

<p>Required scope: <code class="prettyprint">connctd.units.read</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/properties/-propertyName-</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> A single property. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="add-property">Add property</h2>

<p>Adds a new property.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/properties <em>Content-Type:</em> application/json <em>Body:</em> New property. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyNewProperty"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 201</p>
</blockquote>

<h2 id="delete-property">Delete property</h2>

<p>Removes a property from property set</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> DELETE <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/properties/-propertyName-</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<h2 id="get-thing-references">Get thing references</h2>

<p>Retrieves a list of all thing references</p>

<p>Required scope: <code class="prettyprint">connctd.units.read</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> GET <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/things</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200 <em>Body:</em> List of thing references. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/things/591327fe-5c1a-4dbb-a96b-9bef4de0a273"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<h2 id="add-thing-reference">Add thing reference</h2>

<p>Adds a reference to a things.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> POST <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/things <em>Content-Type:</em> application/json <em>Body:</em> Id of thing. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"591327fe-5c1a-4dbb-a96b-9bef4de0a273"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 201</p>
</blockquote>

<h2 id="remove-thing-reference">Remove thing reference</h2>

<p>Removes a reference to a thing.</p>

<p>Required scope: <code class="prettyprint">connctd.units.admin</code></p>

<blockquote>
<p><strong>Request:</strong> <em>Method:</em> DELETE <em>Url:</em> https://api.connctd.io/api/v1/units/-unitId-/things <em>Content-Type:</em> application/json <em>Body:</em> Id of thing. See example below</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"591327fe-5c1a-4dbb-a96b-9bef4de0a273"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><strong>Response:</strong> <em>Code:</em> 200</p>
</blockquote>

          <h1 id="things">Things</h1>

<p>Things in our API are abstract representations of specific IoT related devices. They can be created, deleted
and managed with our API. Depending on the requested action the supplied token must have certain scopes.</p>

<p>Available scopes for Things:</p>

<ul>
<li>connctd.connector</li>
<li>connctd.things.read</li>
</ul>

<h2 id="add-a-thing">Add a Thing</h2>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<p>To add a Thing you need to acquire a token with the scope <code class="prettyprint">connctd.connector</code> through the OAuth2
process. After this you are able to create Things with the following request</p>

<p><code class="prettyprint">POST https://api.connctd.io/api/v1/things</code></p>

<aside class="notice">The Thing-ID needs to be unique across all Things in our API. Therefore it is
possible that the Thing-ID is changed by our backend. The actual Thing-ID is returned in case of 
success.</aside>

<blockquote>
<p>Request body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;unique-thing-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;human readable name&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"manufacturer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;human readbale manufacturer name&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"displaytype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;hint for display purposes&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"maincomponentid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;id of the main component&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"components"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;thing unique id of component&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;human readable name of component&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"componenttype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;type of the component&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"capabilities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"&lt;one ore more capabaliies&gt;"</span><span class="p">],</span><span class="w">
      </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;component unique name of property&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string representation of the value&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;short name of unit of measurement&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;data type of value (NUMBER,STRING,BOOLEAN)&gt;"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;component unique name of action&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;parameter name&gt;"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;type of parameter(NUMBER,STRING or BOOLEAN&gt;"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">   
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"actual-thing-id"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="delete-a-thing">Delete a Thing</h2>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<p><code class="prettyprint">DELETE https://api.connctd.io/api/v1/things/&lt;thing-id&gt;</code></p>

<p>If the supplied bearer token has the scope <code class="prettyprint">connctd.connector</code> and the Thing with the specified
id was created by the application belongig to the bearer token, this request will delete the 
specified Thing.</p>

<h2 id="update-a-thing-property">Update a Thing property</h2>

<p>Required scope: <code class="prettyprint">connctd.connector</code></p>

<p>This endpoint lets you update a property of a Thing you created.</p>

<p><code class="prettyprint">PUT https://api.connctd.io/api/v1/things/&lt;thing-id&gt;/component/&lt;component-id&gt;/property/&lt;property-name&gt;</code></p>

<blockquote>
<p>Request body</p>
</blockquote>
<pre class="highlight plaintext"><code>value
</code></pre>
<p>The supplied value must be a valid representation of the property type of this property.</p>

          <h1 id="errors">Errors</h1>

<p>The connctd.io API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your token or credentials can&rsquo;t be verified</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The provided token does not have sufficient permissions for the requested action</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified Unit or Thing could not be found</td>
</tr>
<tr>
<td>409</td>
<td>Conflict &ndash; Resource already exists or conflicts with another resource</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

<blockquote>
<p>Error response object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"404"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"THING_DOESNT_EXIST"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The requested Thing doesn't exist"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"more_info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://docs.connctd.io/errors/thing_doesnt_exist"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
